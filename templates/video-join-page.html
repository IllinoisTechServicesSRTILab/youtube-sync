{% extends 'base.html' %}

{% block content %}

    <script src="static/scripts/video-join-page.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <div class="body-parent">
        <div class="body-container">
            <h1>Youtube-Sync Prototype: Video Player</h1>
            <a href="/">Return to Homepage</a>

            <br><br>

            <h2 id="session-ended" class="hidden"></h2>
            <p id="session-loading" class="hidden">Joining session, please wait...</p>

            <div id="form">
                <p class="leftalign">
                    <b>Instructions:</b><br>
                    - For video players to synchronize, each session must have a single host and one or more guest users. For synchronization purposes, everyone will sync with the host,
                    but any user can pause, resume, or skip throughout the video playback and these actions will affect everyone. The host also has the power to kick out users.
                    <br>
                    - To use the player, have one user select the "Host a New Session" option and then type in a name and click "Create Session". Then, have the other users select the "Join an Existing Session" option, type in a name, and click "Join Session". Anyone can pause, play, or skip throughout the video playback.
                </p>

                <br>

                <input type="radio" id="guest_radio" name="host_guest" value="1" onchange="GuestBoxChecked();" checked />
                <label for="guest_radio">Join an Existing Session</label><br>
                <input type="radio" id="host_radio" name="host_guest" value="0" onchange="HostBoxChecked();" />
                <label for="host_radio">Host a New Session</label><br><br>

                <div class="mb-3">
                    <input type="text" class="form-control" placeholder="Your Name" id="username_input" maxlength="20" oninput="HandleUsernameInput(this)" />
                    <br><br>
                    <input type="text" class="form-control" placeholder="YouTube Video URL" value="https://www.youtube.com/watch?v=LXb3EKWsInQ" id="url_input" maxlength="50" oninput="HandleURLInput(this)" class="hidden" />
                    <br><br>
                    <button class="btn btn-success" onclick="session_begin()" id="btnStartSession" disabled>Join Session</button>
                </div>
            </div>

            <p id="creating-session" class="hidden"><br><br>Creating session, please wait...<br><br></p>
            <p id="joining-session" class="hidden"><br><br>Joining session, please wait...<br><br></p>
            <p id="error-display" class="hidden error"></p>
            <p id="host-notice" class="hidden">Warning: If you close this tab or navigate to a different site, all other users will be disconnected from the session.<br><br></p>
        </div>
    </div>

{% endblock %}