{% extends 'base.html' %}

{% block content %}
    <script>
        var sessionID = "{{ sessionID }}";
        var invalidURL = {% if invalidURL == true %}true{% else %}false{% endif %};
    </script>

    <h1>Welcome to Youtube-Sync!</h1>

    <div class="modal fade" id="modalInvalidURL" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Invalid Session URL</h5>
          </div>
          <div class="modal-body">
              <p>Oops! You entered an invalid session URL. Please double-check that the URL sent by your host was correct.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalCreateSession" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Create New Session</h5>
          </div>
          <div class="modal-body">
              <p class="small-text">If you want to join a session instead, use the link sent to you by the session host.</p>
              <p class="error-message" id="createSession-errorMessage"></p>

              <input type="text" id="createSession-username" placeholder="Your Name" class="form-control" value="Nick" />
              <input type="text" id="createSession-videoURL" placeholder="YouTube Video URL" class="form-control" value="https://www.youtube.com/watch?v=LXb3EKWsInQ" />
          </div>
          <div class="modal-footer">
              <div class="spinner-border" id="createSessionSpinner"></div>

            <button type="button" class="btn btn-primary" onclick="CreateSession();" id="createSession-button">Create Session</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalJoinSession" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Join Session {{ sessionID }}</h5>
          </div>
          <div class="modal-body">
            <input type="text" id="joinSession-username" placeholder="Your Name" class="form-control" />
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="JoinSession();">Join Session</button>
          </div>
        </div>
      </div>
    </div>

    <br><br>

    <div id="video-div">
        <video
            id="video-js"
            class="video-js"
            controls
            autoplay
            preload="auto"
            poster="MY_VIDEO_POSTER.jpg"
            data-setup='{
                "techOrder": ["youtube"],
                "sources": [{
                    "type": "video/youtube",
                    "src": ""
                }]
            }'
            >
                <p class="vjs-no-js">
                    To view this video please enable JavaScript, and consider upgrading to a web browser that
                    <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                </p>
        </video>
    </div>
{% endblock %}